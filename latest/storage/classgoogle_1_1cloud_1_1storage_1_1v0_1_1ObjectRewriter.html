<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud Storage C++ Client: google::cloud::storage::v0::ObjectRewriter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud Storage C++ Client
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">A C++ Client Library for Google Cloud Storage</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegoogle.html">google</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud.html">cloud</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1storage_1_1v0.html">v0</a></li><li class="navelem"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html">ObjectRewriter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google::cloud::storage::v0::ObjectRewriter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Complete long running object rewrite operations.  
 <a href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="object__rewriter_8h_source.html">google/cloud/storage/object_rewriter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1cbfe9b021484e6f86592e0a4cee44a1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html#a1cbfe9b021484e6f86592e0a4cee44a1">ObjectRewriter</a> (std::shared_ptr&lt; internal::RawClient &gt; client, internal::RewriteObjectRequest request)</td></tr>
<tr class="separator:a1cbfe9b021484e6f86592e0a4cee44a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a309e46a562b9eda84ff1352628c57efd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgoogle_1_1cloud_1_1storage_1_1v0_1_1RewriteProgress.html">RewriteProgress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html#a309e46a562b9eda84ff1352628c57efd">Iterate</a> ()</td></tr>
<tr class="memdesc:a309e46a562b9eda84ff1352628c57efd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform one iteration in the rewrite.  <a href="#a309e46a562b9eda84ff1352628c57efd">More...</a><br /></td></tr>
<tr class="separator:a309e46a562b9eda84ff1352628c57efd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae12e1ee83a85728358700545aca1b08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgoogle_1_1cloud_1_1storage_1_1v0_1_1RewriteProgress.html">RewriteProgress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html#aae12e1ee83a85728358700545aca1b08">CurrentProgress</a> () const</td></tr>
<tr class="memdesc:aae12e1ee83a85728358700545aca1b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current progress on the rewrite operation.  <a href="#aae12e1ee83a85728358700545aca1b08">More...</a><br /></td></tr>
<tr class="separator:aae12e1ee83a85728358700545aca1b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70135d91f3936fa1fb6c76467f0d3844"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectMetadata.html">ObjectMetadata</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html#a70135d91f3936fa1fb6c76467f0d3844">Result</a> ()</td></tr>
<tr class="memdesc:a70135d91f3936fa1fb6c76467f0d3844"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate until the operation completes using a callback to report progress.  <a href="#a70135d91f3936fa1fb6c76467f0d3844">More...</a><br /></td></tr>
<tr class="separator:a70135d91f3936fa1fb6c76467f0d3844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14a1ad23c742f13611c2277fdac64ae"><td class="memTemplParams" colspan="2">template&lt;typename Functor , typename std::enable_if&lt; google::cloud::internal::is_invocable&lt; Functor, RewriteProgress &gt;::value, int &gt;::type  = 0&gt; </td></tr>
<tr class="memitem:ab14a1ad23c742f13611c2277fdac64ae"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectMetadata.html">ObjectMetadata</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html#ab14a1ad23c742f13611c2277fdac64ae">ResultWithProgressCallback</a> (Functor cb)</td></tr>
<tr class="memdesc:ab14a1ad23c742f13611c2277fdac64ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate until the operation completes using a callback to report progress.  <a href="#ab14a1ad23c742f13611c2277fdac64ae">More...</a><br /></td></tr>
<tr class="separator:ab14a1ad23c742f13611c2277fdac64ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d72d241796badcdf9346ddc4f8bd917"><td class="memItemLeft" align="right" valign="top">std::string const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html#a2d72d241796badcdf9346ddc4f8bd917">token</a> () const</td></tr>
<tr class="memdesc:a2d72d241796badcdf9346ddc4f8bd917"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current rewrite token.  <a href="#a2d72d241796badcdf9346ddc4f8bd917">More...</a><br /></td></tr>
<tr class="separator:a2d72d241796badcdf9346ddc4f8bd917"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Complete long running object rewrite operations. </p>
<p>The <code><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1Client.html#a6f79ed0314f8655e71c4292895636f1c" title="Creates an ObjectRewriter to copy the source object. ">Client::RewriteObject()</a></code> operation allows applications to copy objects across location boundaries, and to rewrite objects with different encryption keys. In some circumstances it may take multiple calls to the service to complete a rewrite, this class encapsulates the state of a partial copy. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1cbfe9b021484e6f86592e0a4cee44a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cbfe9b021484e6f86592e0a4cee44a1">&#9670;&nbsp;</a></span>ObjectRewriter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">google::cloud::storage::v0::ObjectRewriter::ObjectRewriter </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; internal::RawClient &gt;&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">internal::RewriteObjectRequest&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aae12e1ee83a85728358700545aca1b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae12e1ee83a85728358700545aca1b08">&#9670;&nbsp;</a></span>CurrentProgress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgoogle_1_1cloud_1_1storage_1_1v0_1_1RewriteProgress.html">RewriteProgress</a> google::cloud::storage::v0::ObjectRewriter::CurrentProgress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current progress on the rewrite operation. </p>

</div>
</div>
<a id="a309e46a562b9eda84ff1352628c57efd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a309e46a562b9eda84ff1352628c57efd">&#9670;&nbsp;</a></span>Iterate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgoogle_1_1cloud_1_1storage_1_1v0_1_1RewriteProgress.html">RewriteProgress</a> google::cloud::storage::v0::ObjectRewriter::Iterate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform one iteration in the rewrite. </p>
<dl class="section return"><dt>Returns</dt><dd>The progress after the iteration. If the rewrite has completed the application can use <code><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectRewriter.html#a70135d91f3936fa1fb6c76467f0d3844" title="Iterate until the operation completes using a callback to report progress. ">Result()</a></code> to examine the metadata for the newly created object. </dd></dl>

</div>
</div>
<a id="a70135d91f3936fa1fb6c76467f0d3844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70135d91f3936fa1fb6c76467f0d3844">&#9670;&nbsp;</a></span>Result()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectMetadata.html">ObjectMetadata</a> google::cloud::storage::v0::ObjectRewriter::Result </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterate until the operation completes using a callback to report progress. </p>
<dl class="section note"><dt>Note</dt><dd>This operation blocks until the copy is finished. For very large objects that could take substantial time. Applications may need to persist the rewrite operation. Some applications may want to wrap this call with <code>std::async</code>, and run the copy on a separate thread.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the object metadata once the copy completes. </dd></dl>

</div>
</div>
<a id="ab14a1ad23c742f13611c2277fdac64ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14a1ad23c742f13611c2277fdac64ae">&#9670;&nbsp;</a></span>ResultWithProgressCallback()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Functor , typename std::enable_if&lt; google::cloud::internal::is_invocable&lt; Functor, RewriteProgress &gt;::value, int &gt;::type  = 0&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1ObjectMetadata.html">ObjectMetadata</a> google::cloud::storage::v0::ObjectRewriter::ResultWithProgressCallback </td>
          <td>(</td>
          <td class="paramtype">Functor&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterate until the operation completes using a callback to report progress. </p>
<dl class="section note"><dt>Note</dt><dd>This operation blocks until the copy is finished. For very large objects that could take substantial time. Applications may need to persist the rewrite operation. Some applications may want to wrap this call with <code>std::async</code>, and run the copy on a separate thread.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>the callback object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Functor</td><td>the type of the callback object. It must satisfy: <code>std:is_invocable&lt;Functor, <a class="el" href="structgoogle_1_1cloud_1_1storage_1_1v0_1_1RewriteProgress.html" title="Represents the status of a rewrite operation. ">RewriteProgress</a>&gt;:: value == true</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the object metadata once the copy completes. </dd></dl>

</div>
</div>
<a id="a2d72d241796badcdf9346ddc4f8bd917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d72d241796badcdf9346ddc4f8bd917">&#9670;&nbsp;</a></span>token()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string const&amp; google::cloud::storage::v0::ObjectRewriter::token </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current rewrite token. </p>
<p>Applications can save the token of partially completed rewrites, and restart those operations using <code>Client::CopyObjectRestart</code>, even if the application has terminated. It is up to the application to preserve all the other information for the request, including source and destination buckets, encryption keys, and any preconditions affecting the request.</p>
<dl class="section note"><dt>Note</dt><dd>For rewrites that have not started the token is an empty string. For rewrites that have completed the token is also an empty string. The application should preserve other information (such as the <code><a class="el" href="structgoogle_1_1cloud_1_1storage_1_1v0_1_1RewriteProgress.html" title="Represents the status of a rewrite operation. ">RewriteProgress</a></code>) to avoid repeating a rewrite. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="object__rewriter_8h_source.html">object_rewriter.h</a></li>
<li><a class="el" href="object__rewriter_8cc.html">object_rewriter.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
